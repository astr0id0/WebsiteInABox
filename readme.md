This script can be ran to automate a lot of the installation and configuration steps required for deploying a docker, mailu server, wordpress, etc.  It is a WIP.

It has been tested on Ubuntu 10.04 LTS.  

First, I recommend running the 'boot script' I have in another repostory (update with link), which will ensure the OS itself is up to date, assist with the initial user setup, and then pull down this repository to launch the script to do the bulk of the automation.  

To use this script without the related boot script, run do the following: 

PREP WORK: 
Deploy an instance of Ubuntu 20.04 LTS server
Run all updates on the server
Note the Publc IP for the server
Decide what domain you are using, and add MX and A records
  Type		Host		Value		
    A		mail		$publicip	
    MX		@		$newservername		
Generate your MailU setup here: https://setup.mailu.io/1.8/ 

Edit the /serversetup/WebsitInABox/ServerSetup.sh file and update the variables show below to match your intended setup:
You can run 'nano /serversetup/WebsitInABox/ServerSetup.sh'


########################################################################
#Define Variables for the server/user configuratins
newservername='mail.yourserver.com'					#The server will be renamed to whatever this is set to - the domain should match your web domain
domain='yourserver.com'									#I chose the name HomeBase because it is going to be running Mail, Web, etc -- its the Home Base of Operations
publicip=$(dig @resolver4.opendns.com myip.opendns.com +short)  #The public IP is captured, which will help automate updating the hosts file later
newadminuser='adam'  											#This user will be able to launch docker without sudo, and have elevated priveledge
newadminpw='EnterPWHERE!!!!'								#It should be customized to your liking by default it will be added to the docker group + have sudo priveledge								
	
#MailU Setup: define the URL's for your mailu configuration -- these URL's can be generated by running the MailU setup here: https://setup.mailu.io/1.8/ 
#Mailu Setup: Additional resources can be found here: https://inguide.in/mailu-docker-compose-setup-build-self-hosted-mail-server/ and here:  https://www.youtube.com/watch?v=LwNOb7Qz-VQ
#
#Steps to select for Mailu Setup from InGuide link: Compose > Enter $domain for "main main domain and server display name" > check Enabled the Admin UI
#  Select RoundCube for "Enable Web email client", check enable for AntiVirus, Webdav, and fetchmail > IPv4 listen address should be set to the $publicIP > Check "Enable Unbound Resolver" >
#  Enter 

Press Ctrl-X to save after updating newservername, domain, newadminuser, and newadminpw

RUNNING SCRIPT:

cd /
mkdir serversetup
cd serversetup
git clone https://github.com/astr0id0/WebsiteInABox.git
cd WebsiteInABox
chmod +x ServerSetup.sh
./ServerSetup.sh

